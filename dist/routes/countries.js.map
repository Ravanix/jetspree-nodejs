{"version":3,"sources":["../../src/routes/countries.js"],"names":["router","Router","get","req","res","db","collection","find","e","docs","json","pool","connect","then","client","query","release","result","rows","catch","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AACA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEAD;AACC;AADD,CAEEE,GAFF,CAEM,GAFN,EAEW,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC7B,KAAIC,KAAKF,IAAIE,EAAb;AACA,KAAIC,aAAaD,GAAGH,GAAH,CAAO,WAAP,CAAjB;;AAEAI,YAAWC,IAAX,CAAgB,EAAhB,EAAoB,EAApB,EAAwB,UAAUC,CAAV,EAAaC,IAAb,EAAmB;AAC1CL,MAAIM,IAAJ,CAASD,IAAT;AACA,EAFD;AAGA,CATF;;AAWC;AAXD,CAYEP,GAZF,CAYM,KAZN,EAYa,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/BD,KAAIQ,IAAJ,CAASC,OAAT,GAAmBC,IAAnB,CAAwB,kBAAU;AACjCC,SAAOC,KAAP,CAAa,gCAAb,EAA+C,EAA/C,EACEF,IADF,CACO,kBAAU;AACfC,UAAOE,OAAP;AACAZ,OAAIM,IAAJ,CAASO,OAAOC,IAAhB;AACA,GAJF,EAKEC,KALF,CAKQ,aAAK;AACXL,UAAOE,OAAP;AACA,SAAMR,CAAN;AACA,GARF;AASA,EAVD;AAWA,CAxBF;;AA4BAY,OAAOC,OAAP,GAAiBrB,MAAjB","file":"countries.js","sourcesContent":["import express from 'express';\r\nimport schemas from '../schemas';\r\nconst router = express.Router();\r\n\r\nrouter\r\n\t/* GET list of Countries */\r\n\t.get('/', function (req, res) {\r\n\t\tlet db = req.db;\r\n\t\tlet collection = db.get('countries');\r\n\r\n\t\tcollection.find({}, {}, function (e, docs) {\r\n\t\t\tres.json(docs);\r\n\t\t});\r\n\t})\r\n\r\n\t/* GET list of Countries from Postgres */\r\n\t.get('/pg', function (req, res) {\r\n\t\treq.pool.connect().then(client => {\r\n\t\t\tclient.query('SELECT * FROM public.countries', [])\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tclient.release();\r\n\t\t\t\t\tres.json(result.rows);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tclient.release();\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t});\r\n\t\t});\r\n\t})\r\n\r\n\t;\r\n\r\nmodule.exports = router;"]}